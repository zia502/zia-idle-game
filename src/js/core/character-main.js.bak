/**
 * 创建主角方法 - 添加到Character对象
 */
Character.createMainCharacter = function(data) {
    // 检查是否已有主角
    const existingMainCharacter = this.getMainCharacter();
    if (existingMainCharacter) {
        console.warn('主角已存在，无法创建新主角');
        return existingMainCharacter.id;
    }
    
    // 设置主角数据
    const characterData = {
        ...data,
        isMainCharacter: true,
        level: 1,
        exp: 0,
        // 默认主角特性
        traits: data.traits || ['quickLearner'],
        // 默认主角职业
        job: {
            current: 'novice',
            level: 1,
            history: ['novice'],
            jobTraits: {}
        }
    };
    
    // 添加主角
    const characterId = this.addCharacter(characterData);
    
    if (characterId) {
        console.log(`创建主角成功: ${data.name}`);
        
        // 设置游戏主角等级
        if (typeof Game !== 'undefined') {
            Game.state.playerLevel = 1;
        }
    }
    
    return characterId;
};
